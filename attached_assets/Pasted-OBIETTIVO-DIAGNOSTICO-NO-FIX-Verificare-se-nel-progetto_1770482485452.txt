OBIETTIVO (DIAGNOSTICO, NO FIX)
Verificare se nel progetto (ancora su Replit) esistono condizioni/codice/configurazioni che:
- dipendono implicitamente dall’ambiente Replit
- possono bloccare o rendere instabile l’esecuzione fuori da Replit (es. Windsurf/local)
- rendono non deterministico l’avvio o il consumo delle API

Questo step è SOLO diagnostico: niente refactor, niente rimozioni, niente modifiche funzionali.

PERCHÉ LO STIAMO FACENDO (MOTIVAZIONI)
In Windsurf abbiamo avuto problemi “tipici” di portabilità:
1) App “sembra avviata” ma in realtà non resta raggiungibile o non renderizza (server ok, UI no).
2) Porta e middleware: server in LISTEN ma comportamento non coerente (client crash/overlay).
3) API in dev che non tornano JSON consistente: in un caso le GET /api/* risultavano 304 Not Modified (ETag) e il client (React Query) le trattava come errore, bloccando il render.
4) Flag di listen non supportati fuori da certi ambienti (es. reusePort) che possono causare ENOTSUP e exit immediato.
5) Presenza di plugin/branch Replit (REPL_ID, @replit, replit_integrations) che possono creare differenze runtime tra Replit e locale.

Vogliamo capire se su Replit esiste ancora qualche “vincolo nascosto” o assunzione che spiega perché fuori da Replit l’app non è deterministica.

COSA DEVI FARE (IN ORDINE) — SOLO ANALISI, SOLO FATTI

FASE 1 — PROFILO DI ESECUZIONE SU REPLIT (PROVA OGGETTIVA)
1) Avvia l’app in Replit nel modo standard del progetto.
2) Raccogli e riporta:
   - comando effettivo di avvio (script e comando reale)
   - porte in uso (backend e frontend se separati)
   - URL effettivo in Replit dove l’app è raggiungibile
   - log di boot completi (senza segreti)
3) Verifica raggiungibilità:
   - homepage: status code e Content-Type
   - una chiamata API chiave (es. /api/pages): status code e Content-Type
   - conferma che le API ritornino JSON (non HTML index)

FASE 2 — CHECK “PORTABILITÀ” (REPLIT-DEPENDENCY SCAN)
4) Scansiona il repo e inventaria (lista puntuale) ogni elemento Replit-specific:
   - file: .replit, replit.nix, replit.md, cartelle replit_integrations
   - dipendenze: @replit/*
   - env: REPL_ID, REPL_SLUG, REPL_OWNER, ecc.
   - plugin Vite o middleware che fanno check su REPL_ID
   - log string “Replit …”
5) Per ogni elemento trovato, classifica:
   - Tipo: config / runtime / tooling / doc
   - Impatto potenziale fuori Replit: NESSUNO / BASSO / MEDIO / ALTO
   - Motivo (1 riga fattuale: cosa fa e dove viene usato)

FASE 3 — DIFFERENZE CHE POSSONO SPIEGARE I BUG VISTI IN WINDSURF
6) Verifica specificamente (con riferimenti a file/righe o configurazioni):
   A) listen flags: reusePort / host 0.0.0.0 / binding particolare
   B) caching API: ETag, 304, cache-control, service worker
   C) routing API vs SPA: possibilità che /api/* venga catturato da catch-all che serve index.html
   D) env gating: branch che cambia storage/backend se mancano env
   E) doppio processo: frontend e backend gestiti in modo non standard (Replit auto-proxy, ecc.)

FASE 4 — VERDETTO DIAGNOSTICO
7) Concludi con un verdetto secco:
   - “Nessun blocco Replit-specific che impedisce Windsurf” oppure
   - “Esistono N blocchi/assunzioni che possono impedire Windsurf”
8) Se esistono blocchi, elencali come checklist (solo nominativi), senza fix:
   - BLOCCO 1: <nome breve> — dove — perché impatta
   - BLOCCO 2: ...
9) Se NON esistono blocchi, dichiaralo esplicitamente e indica quali differenze sono solo di configurazione locale (env/porta) e non di codice.

DIVIETI
- NON modificare file
- NON rimuovere dipendenze
- NON cambiare script
- NON applicare fix
- NON proporre soluzioni generiche
- Solo prove verificabili (log, comandi, file trovati)

OUTPUT ATTESO (IN CHAT)
- Profilo runtime Replit (comando, porte, URL, log essenziali)
- Tabella/Lista inventario elementi Replit-specific + impatto
- Check puntuale su A/B/C/D/E
- Verdetto finale diagnostico (solo fatti)

NOTE
Se hai bisogno di conferma su quali endpoint API testare, usa:
- /api/pages (o l’endpoint più usato dal client all’avvio)
- e una seconda API a scelta (es. /api/page-blocks o simile)
